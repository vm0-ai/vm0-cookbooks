version: "1.0"

agents:
  904-firewall:
    provider: claude-code
    # Build agentic workflow using natural language
    instructions: AGENTS.md
    # Agent skills - see https://github.com/vm0-ai/vm0-skills for available skills
    # skills:
    #   - https://github.com/vm0-ai/vm0-skills/tree/main/github
    environment:
      # Get token using: claude setup-token, then add to .env file
      CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
    # Experimental firewall configuration
    experimental_firewall:
      enabled: true
      rules:
        # Allow GitHub domains for agent operations
        - domain: "*.github.com"
          action: ALLOW
        - domain: "*.githubusercontent.com"
          action: ALLOW
        # Block private network ranges
        - ip: "10.0.0.0/8"
          action: DENY
        - ip: "172.16.0.0/12"
          action: DENY
        - ip: "192.168.0.0/16"
          action: DENY
        # Default deny all other traffic
        - final: DENY
    experimental_runner:
      group: vm0/production
